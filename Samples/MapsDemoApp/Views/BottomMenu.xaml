<?xml version="1.0" encoding="utf-8" ?>

<ContentView
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:s="http://schemas.superdev.ch/dotnet/2021/maui"
    x:Class="MapsDemoApp.Views.BottomMenu">
    <ContentView.Resources>
        <ResourceDictionary>
            <Style
                x:Key="SectionLabelStyle"
                TargetType="Label">
                <Setter Property="BackgroundColor" Value="LightGray" />
                <Setter Property="FontAttributes" Value="Bold" />
                <Setter Property="HorizontalOptions" Value="Fill" />
                <Setter Property="FontSize" Value="Medium" />
            </Style>
        </ResourceDictionary>
    </ContentView.Resources>
    <ScrollView
        Padding="16"
        HeightRequest="200"
        VerticalScrollBarVisibility="Always">
        <VerticalStackLayout
            Spacing="16"
            VerticalOptions="Start">
            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="IsShowingUser" />
                <Grid
                    ColumnDefinitions="Auto,*"
                    ColumnSpacing="8">
                    <Switch
                        Grid.Row="0"
                        Grid.Column="0"
                        IsToggled="{Binding IsShowingUser}"
                        VerticalOptions="Center">
                        <Switch.Behaviors>
                            <s:EventToCommandBehavior
                                Command="{Binding IsShowingUserToggledCommand}"
                                EventName="Toggled" />
                        </Switch.Behaviors>
                    </Switch>
                    <Label
                        Grid.Row="0"
                        Grid.Column="1"
                        Text="{Binding IsShowingUser, StringFormat='{0}'}"
                        VerticalTextAlignment="Center" />
                </Grid>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="CenterPosition" />
                <Grid
                    ColumnDefinitions="*,Auto"
                    ColumnSpacing="8">
                    <VerticalStackLayout Grid.Column="0">
                        <Label>
                            <Label.Text>
                                <MultiBinding StringFormat="Longitude: {0:F5}&#10;Latitude: {1:F5}&#10;Altitude: {2:F2}">
                                    <Binding Path="CurrentPosition.Longitude" />
                                    <Binding Path="CurrentPosition.Latitude" />
                                    <Binding Path="CurrentPosition.Altitude" />
                                </MultiBinding>
                            </Label.Text>
                        </Label>
                    </VerticalStackLayout>
                    <Button
                        Grid.Column="1"
                        Command="{Binding GetCurrentPositionCommand}"
                        ImageSource="crosshairs_gps_white"
                        MaximumHeightRequest="48"
                        MaximumWidthRequest="48"
                        HorizontalOptions="End"
                        VerticalOptions="Start" />
                </Grid>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="Zoom" />
                <VerticalStackLayout Spacing="8">
                    <Grid
                        ColumnDefinitions="Auto,*,Auto"
                        ColumnSpacing="4">
                        <Label
                            Grid.Column="0"
                            Text="{Binding Source={x:Reference ZoomLevelSlider}, Path=Minimum}"
                            HorizontalOptions="Start" />
                        <Label
                            Grid.Column="1"
                            Text="{Binding ZoomLevel, Converter={StaticResource DistanceToStringConverter}, ConverterParameter=km, StringFormat='{0:F2} km'}"
                            HorizontalOptions="Center" />
                        <Label
                            Grid.Column="2"
                            Text="{Binding Source={x:Reference ZoomLevelSlider}, Path=Maximum}"
                            HorizontalOptions="End" />
                    </Grid>
                    <Slider
                        x:Name="ZoomLevelSlider"
                        Maximum="1000"
                        Minimum="0.01"
                        Value="{Binding ZoomLevel, Mode=TwoWay, Converter={StaticResource DistanceToStringConverter}, ConverterParameter=km}" />
                </VerticalStackLayout>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="VisibleRegion" />
                <VerticalStackLayout Spacing="8">
                    <Label>
                        <Label.Text>
                            <MultiBinding StringFormat="Center.Longitude: {0:F5}&#10;Center.Latitude: {1:F5}&#10;LatitudeDegrees: {2:F2}&#10;LongitudeDegrees: {3:F2}">
                                <Binding Path="VisibleRegion.Center.Longitude" />
                                <Binding Path="VisibleRegion.Center.Latitude" />
                                <Binding Path="VisibleRegion.LatitudeDegrees" />
                                <Binding Path="VisibleRegion.LongitudeDegrees" />
                            </MultiBinding>
                        </Label.Text>
                    </Label>

                    <Picker
                        ItemDisplayBinding="{Binding Name}"
                        ItemsSource="{Binding Locations}"
                        SelectedItem="{Binding SelectedLocation}" />
                </VerticalStackLayout>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="MapType" />
                <VerticalStackLayout Spacing="8">
                    <Picker
                        ItemsSource="{Binding MapTypes}"
                        SelectedItem="{Binding MapType}" />
                </VerticalStackLayout>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="ItemsSource" />
                <ScrollView Orientation="Horizontal">
                    <HorizontalStackLayout Spacing="8">
                        <Button
                            Command="{Binding LoadPinsCommand}"
                            Text="Load" />
                        <Button
                            Command="{Binding AddPinCommand}"
                            Text="Add" />
                        <Button
                            Command="{Binding RemovePinCommand}"
                            Text="Remove" />
                        <Button
                            Command="{Binding ClearAllPinsCommand}"
                            Text="Clear" />
                    </HorizontalStackLayout>
                </ScrollView>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="SelectedItem" />
                <Label>
                    <Label.Text>
                        <MultiBinding StringFormat="Name: {0}&#10;Longitude: {1:F5}&#10;Latitude: {2:F5}">
                            <Binding Path="SelectedParkingLot.Name" />
                            <Binding Path="SelectedParkingLot.Location.Longitude" />
                            <Binding Path="SelectedParkingLot.Location.Latitude" />
                        </MultiBinding>
                    </Label.Text>
                </Label>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="MapElements" />
                <ScrollView Orientation="Horizontal">
                    <HorizontalStackLayout Spacing="8">
                        <Button
                            Command="{Binding AddPolygonsCommand}"
                            Text="Add polygons" />
                        <Button
                            Command="{Binding AddPolylinesCommand}"
                            Text="Add polylines" />
                        <Button
                            Command="{Binding AddCirclesCommand}"
                            Text="Add circles" />
                        <Button
                            Command="{Binding ClearMapElementsCommand}"
                            Text="Clear" />
                    </HorizontalStackLayout>
                </ScrollView>
            </VerticalStackLayout>

            <VerticalStackLayout Spacing="4">
                <Label
                    Style="{StaticResource SectionLabelStyle}"
                    Text="Options" />
                <Grid
                    ColumnDefinitions="*,*"
                    ColumnSpacing="8"
                    RowDefinitions="Auto,Auto,Auto"
                    RowSpacing="8">
                    <Grid
                        Grid.Row="0"
                        Grid.Column="0"
                        ColumnDefinitions="Auto,*"
                        ColumnSpacing="8">
                        <Switch
                            Grid.Row="0"
                            Grid.Column="0"
                            IsToggled="{Binding IsZoomEnabled}"
                            VerticalOptions="Center" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding IsZoomEnabled, StringFormat='IsZoomEnabled={0}'}"
                            VerticalTextAlignment="Center" />
                    </Grid>
                    <Grid
                        Grid.Row="0"
                        Grid.Column="1"
                        ColumnDefinitions="Auto,*"
                        ColumnSpacing="8">
                        <Switch
                            Grid.Row="0"
                            Grid.Column="0"
                            IsToggled="{Binding IsScrollEnabled}"
                            VerticalOptions="Center" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding IsScrollEnabled, StringFormat='IsScrollEnabled={0}'}"
                            VerticalTextAlignment="Center" />
                    </Grid>
                    <Grid
                        Grid.Row="1"
                        Grid.Column="0"
                        ColumnDefinitions="Auto,*"
                        ColumnSpacing="8">
                        <Switch
                            Grid.Row="0"
                            Grid.Column="0"
                            IsToggled="{Binding IsRotateEnabled}"
                            VerticalOptions="Center" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding IsRotateEnabled, StringFormat='IsRotateEnabled={0}'}"
                            VerticalTextAlignment="Center" />
                    </Grid>
                    <Grid
                        Grid.Row="1"
                        Grid.Column="1"
                        ColumnDefinitions="Auto,*"
                        ColumnSpacing="8">
                        <Switch
                            Grid.Row="0"
                            Grid.Column="0"
                            IsToggled="{Binding IsTrafficEnabled}"
                            VerticalOptions="Center" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding IsTrafficEnabled, StringFormat='IsTrafficEnabled={0}'}"
                            VerticalTextAlignment="Center" />
                    </Grid>
                    <Grid
                        Grid.Row="2"
                        Grid.Column="0"
                        ColumnDefinitions="Auto,*"
                        ColumnSpacing="8">
                        <Switch
                            Grid.Row="0"
                            Grid.Column="0"
                            IsToggled="{Binding IsReadonly}"
                            VerticalOptions="Center" />
                        <Label
                            Grid.Row="0"
                            Grid.Column="1"
                            Text="{Binding IsReadonly, StringFormat='IsReadonly={0}'}"
                            VerticalTextAlignment="Center" />
                    </Grid>
                </Grid>
            </VerticalStackLayout>
        </VerticalStackLayout>
    </ScrollView>
</ContentView>